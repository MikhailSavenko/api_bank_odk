# Автоматизация обработки и интеграции платежей по рассрочкам из банковского(белгазпромбанк) API в CRM

## Описание проекта

Этот проект направлен на автоматизацию обработки и интеграции платежей по рассрочкам из банковского API в CRM. Приложение автоматически обрабатывает выписки по счетам, извлекает и парсит данные, и интегрирует их в CRM систему. 

## Стек технологий

- **Python**: основной язык программирования
- **Git**: управление версиями
- **Docker**: контейнеризация
- **requests**: работа с API
- **schedule**: планирование задач
- **pdfplumber**: парсинг PDF-файлов
- **logging**: ведение логов
- **datetime**: работа с датой и временем
- **re**: работа с регулярными выражениями

## Установка и запуск

1. **Клонируйте репозиторий:**
   ```bash
   git clone https://github.com/MikhailSavenko/api_bank_odk
   ```

2. **Перейдите в каталог проекта:**
   ```bash
   cd api_bank_odk
   ```

3. **Настройте и запустите контейнеры с помощью Docker Compose:**
   ```bash
   docker-compose up --build
   ```

## Архитектура приложения

- **Авторизация и аутентификация**: Реализованы с помощью библиотеки `requests`. Приложение открывает сессию и автоматически ее продлевает.
- **Получение выписок**: Выписки по счетам получают автоматически каждые 30 минут с использованием `datetime` и `schedule`.
- **Проверка дубликатов**: Используются контекстные менеджеры для работы с файлами (форматы JSON и TXT).
- **Парсинг данных**: Реализован с использованием `re` для регулярных выражений и `pdfplumber` для извлечения данных из PDF-файлов.
- **Docker**: Приложение развернуто в двух контейнерах - один для приложения, другой для хранения временных файлов в volume.

## Виртуальное окружение

- **Ожидаемые парамерты .env**: TOKEN Банка. PAYLOAD при входе в аккаунт банка(печеньки для входа).  TIME_AUTHORIZ время авторизации в банке. TIME_PROCESS время старта получения выписок. BANK_ACCOUNT_WINDOW, BANK_ACCOUNT_CEILING. Два счета по которым можно одновременно получать выписки. Программа работает сразу с двумя счетами.
